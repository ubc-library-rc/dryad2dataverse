<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Command line application - Dryad2dataverse</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Command line application";
    var mkdocs_page_input_path = "script.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Dryad2dataverse</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Command line application</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#an-important-caveat">An important caveat</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../other_utils/">Other utilities</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../compiling/">Compiling or packaging the application</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../reference/">General Reference</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../api_reference/">API Reference</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../track/">Tracking Database Structure</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../credits/">Credits</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Dryad2dataverse</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Command line application</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="automated-migrator-and-tracker-dryadd">Automated migrator and tracker - dryadd<a class="headerlink" href="#automated-migrator-and-tracker-dryadd" title="Permanent link">&para;</a></h1>
<hr />
<p>While it&rsquo;s all very nice that there&rsquo;s code that can migrate Dryad material to Dataverse, many users are not familiar enough with Python/programming or, just as likely, don&rsquo;t want to have to program things themselves. Anyone transferring from Dryad to Dataverse is likely doing a variant of the same thing, which consists of:</p>
<ul>
<li>Finding new Dryad material, usually from their own institution</li>
<li>Moving it to Dataverse</li>
</ul>
<p>and possibly: </p>
<ul>
<li>Checking for updates and handling <strong>those</strong> automatically</li>
</ul>
<p>Included with <strong>dryad2dataverse</strong> is a <a href="https://github.com/ubc-library-rc/dryad2dataverse/blob/master/scripts/dryadd.py">script</a> and <a href="https://github.com/ubc-library-rc/dryad2dataverse/tree/master/binaries">binary files for Windows and Mac</a> which do exactly this. The binary files, if available for your operating system, should not even require a Python installation; they are self-contained programs which will run and monitor the copying process. Depending on what you use and the plaform, the application will be called <code>dryadd.py, dryadd</code> or <code>dryadd.exe</code></p>
<h3 id="an-important-caveat">An important caveat<a class="headerlink" href="#an-important-caveat" title="Permanent link">&para;</a></h3>
<p>This product <strong>will not</strong> publish anything in a Dataverse installation (at this time, at least). This is intentional to allow a human-based curatorial step before releasing any data onto an unsuspecting audience. There&rsquo;s no error like systemic error, so not automatically releasing material should help alleviate this.</p>
<h3 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h3>
<p><strong>Software</strong></p>
<ul>
<li>
<p>If you are using the pure Python version of the migrator (ie, <strong>dryadd.py</strong>) and you have successfully installed the <strong>dryad2dataverse</strong> library, the requirements will be filled by default (see the <a href="../installation/">installation document</a> for more details).</p>
</li>
<li>
<p>If using a binary file, it must be supported by your operating system and system architecture (eg. Intel Mac).</p>
</li>
</ul>
<p><strong>Hardware</strong></p>
<ul>
<li>You will need sufficient storage space on your system to hold the contents of the largest Dryad record that you are transferring. This is not necessarily a small amount; Dryad studies can range into the tens or hundreds of Gb, which means that a &ldquo;normal&rdquo; <code>/tmp</code> directory will normally not have enough space allocated to it.</li>
</ul>
<p><strong>Other</strong></p>
<ul>
<li>A destination Dataverse must exist, and you should know its short name.</li>
<li>The API key must have sufficient privileges to create new studies and upload data.</li>
<li>You will need an email address for contact information as this is a required field in Dataverse (but not necessarily in Dryad) and a name to go with it. For example, <code>i_heart_data@test.invalid</code> and <code>Dataverse Support</code>. Note: Use a valid email address (unlike the example) because uploads will also fail if the address is invalid.</li>
<li>Information for an email address which <em>sends</em> notifications<ul>
<li>For this, you need the user name (&ldquo;user&rdquo; from &ldquo;user@test.invalid&rdquo;)</li>
<li>The password for this account</li>
<li>The smtp server address which sends mail. For example, if using gmail, it&rsquo;s <code>smtp.gmail.com</code></li>
<li>The port required to send email via SSL.</li>
</ul>
</li>
<li>At least one email address to receive update and error notifications. This can be the same as the sender.</li>
<li>A place to store your sqlite3 tracking database.</li>
</ul>
<p><strong>A note about GMail</strong></p>
<p>Although the script is set up to use GMail by default, it likely won&rsquo;t work off the bat. You will need to allow <em>less secure app access</em> and possibly deal with a capture as outlined in the <a href="../faq/">FAQ</a>.</p>
<p><strong>Miscellaneous</strong></p>
<p>This software is still new; it doesn&rsquo;t actually run as a daemon [yet]. To update, just run the script again at whatever interval you desire, and it will find Dryad material that has been updated since the last run.</p>
<p>At this time, the best solution would be to run <strong>dryadd.py</strong> at predifined intervals using <code>cron</code>.</p>
<p>To act as a backup against catastrophic error, the database is automatically copied to $DBASE.bak. Obviously, if you check once a minute this isn&rsquo;t helpful, but it could be if you update once a month.</p>
<h3 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h3>
<p>The implementation is relatively straightforward. Simply supply the required parameters and the software should do the rest. The help menu below is available from the command line by either running the script without inputs or by using the <code>-h</code> switch.</p>
<div class="codehilite"><pre><span></span><code><span class="n">usage</span><span class="p">:</span> <span class="n">dryadd</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="o">-</span><span class="n">u</span> <span class="n">URL</span> <span class="o">-</span><span class="n">k</span> <span class="n">KEY</span> <span class="o">-</span><span class="n">t</span> <span class="n">TARGET</span> <span class="o">-</span><span class="n">e</span> <span class="n">USER</span> <span class="o">-</span><span class="n">r</span> <span class="n">RECIPIENTS</span> <span class="p">[</span><span class="n">RECIPIENTS</span> <span class="o">...</span><span class="p">]</span> <span class="o">-</span><span class="n">p</span> <span class="n">PWD</span> <span class="p">[</span><span class="o">--</span><span class="n">server</span> <span class="n">MAILSERV</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">port</span> <span class="n">PORT</span><span class="p">]</span> <span class="o">-</span><span class="n">c</span> <span class="n">CONTACT</span> <span class="o">-</span><span class="n">n</span> <span class="n">CNAME</span> <span class="p">[</span><span class="o">-</span><span class="n">v</span><span class="p">]</span> <span class="o">-</span><span class="n">i</span> <span class="n">ROR</span> <span class="p">[</span><span class="o">--</span><span class="n">tmpfile</span> <span class="n">TMP</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">db</span> <span class="n">DBASE</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">log</span> <span class="n">LOG</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">l</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">x</span> <span class="n">EXCLUDE</span> <span class="p">[</span><span class="n">EXCLUDE</span> <span class="o">...</span><span class="p">]]</span> <span class="p">[</span><span class="o">--</span><span class="n">version</span><span class="p">]</span>

<span class="n">Dryad</span> <span class="n">to</span> <span class="n">Dataverse</span> <span class="kn">import</span> <span class="nn">daemon.</span> <span class="n">All</span> <span class="n">arguments</span> <span class="n">NOT</span> <span class="n">enclosed</span> <span class="n">by</span> <span class="n">square</span> <span class="n">brackets</span> <span class="n">are</span> <span class="n">REQUIRED</span><span class="o">.</span> <span class="n">Arguments</span> <span class="ow">in</span> <span class="p">[</span><span class="n">square</span> <span class="n">brackets</span><span class="p">]</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">required</span><span class="o">.</span> <span class="n">The</span> <span class="s2">&quot;optional arguments&quot;</span> <span class="n">below</span> <span class="n">refers</span> <span class="n">to</span>
<span class="n">the</span> <span class="n">use</span> <span class="n">of</span> <span class="n">the</span> <span class="n">option</span> <span class="n">switch</span><span class="p">,</span> <span class="p">(</span><span class="n">like</span> <span class="o">-</span><span class="n">u</span><span class="p">),</span> <span class="n">meaning</span> <span class="s2">&quot;not a positional argument.&quot;</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">u</span> <span class="n">URL</span><span class="p">,</span> <span class="o">--</span><span class="n">dv</span><span class="o">-</span><span class="n">url</span> <span class="n">URL</span>  <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Destination</span> <span class="n">dataverse</span> <span class="n">root</span> <span class="n">url</span><span class="o">.</span> <span class="n">Default</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">dataverse</span><span class="o">.</span><span class="n">scholarsportal</span><span class="o">.</span><span class="n">info</span>
  <span class="o">-</span><span class="n">k</span> <span class="n">KEY</span><span class="p">,</span> <span class="o">--</span><span class="n">key</span> <span class="n">KEY</span>     <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">API</span> <span class="n">key</span> <span class="k">for</span> <span class="n">dataverse</span> <span class="n">user</span>
  <span class="o">-</span><span class="n">t</span> <span class="n">TARGET</span><span class="p">,</span> <span class="o">--</span><span class="n">target</span> <span class="n">TARGET</span>
                        <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Target</span> <span class="n">dataverse</span> <span class="n">short</span> <span class="n">name</span>
  <span class="o">-</span><span class="n">e</span> <span class="n">USER</span><span class="p">,</span> <span class="o">--</span><span class="n">email</span> <span class="n">USER</span>
                        <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Username</span> <span class="k">for</span> <span class="n">email</span> <span class="n">address</span> <span class="n">which</span> <span class="n">sends</span> <span class="n">update</span> <span class="n">notifications</span><span class="o">.</span> <span class="n">ie</span><span class="p">,</span> <span class="n">the</span> <span class="s2">&quot;user&quot;</span> <span class="n">portion</span> <span class="n">of</span> <span class="s2">&quot;user@website.invalid&quot;</span><span class="o">.</span>
  <span class="o">-</span><span class="n">r</span> <span class="n">RECIPIENTS</span> <span class="p">[</span><span class="n">RECIPIENTS</span> <span class="o">...</span><span class="p">],</span> <span class="o">--</span><span class="n">recipient</span> <span class="n">RECIPIENTS</span> <span class="p">[</span><span class="n">RECIPIENTS</span> <span class="o">...</span><span class="p">]</span>
                        <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Recipient</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">of</span> <span class="n">email</span> <span class="n">notification</span><span class="o">.</span> <span class="n">Separate</span> <span class="n">addresses</span> <span class="k">with</span> <span class="n">spaces</span>
  <span class="o">-</span><span class="n">p</span> <span class="n">PWD</span><span class="p">,</span> <span class="o">--</span><span class="n">pwd</span> <span class="n">PWD</span>     <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Password</span> <span class="k">for</span> <span class="n">sending</span> <span class="n">email</span> <span class="n">account</span><span class="o">.</span> <span class="n">Enclose</span> <span class="ow">in</span> <span class="n">single</span> <span class="n">quotes</span> <span class="n">to</span> <span class="n">avoid</span> <span class="n">OS</span> <span class="n">errors</span> <span class="k">with</span> <span class="n">special</span> <span class="n">characters</span><span class="o">.</span>
  <span class="o">--</span><span class="n">server</span> <span class="n">MAILSERV</span>     <span class="n">Mail</span> <span class="n">server</span> <span class="k">for</span> <span class="n">sending</span> <span class="n">account</span><span class="o">.</span> <span class="n">Default</span><span class="p">:</span> <span class="n">smtp</span><span class="o">.</span><span class="n">gmail</span><span class="o">.</span><span class="n">com</span>
  <span class="o">--</span><span class="n">port</span> <span class="n">PORT</span>           <span class="n">Mail</span> <span class="n">server</span> <span class="n">port</span><span class="o">.</span> <span class="n">Default</span><span class="p">:</span> <span class="mf">465.</span> <span class="n">Mail</span> <span class="ow">is</span> <span class="n">sent</span> <span class="n">using</span> <span class="n">SSL</span><span class="o">.</span>
  <span class="o">-</span><span class="n">c</span> <span class="n">CONTACT</span><span class="p">,</span> <span class="o">--</span><span class="n">contact</span> <span class="n">CONTACT</span>
                        <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Contact</span> <span class="n">email</span> <span class="n">address</span> <span class="k">for</span> <span class="n">Dataverse</span> <span class="n">records</span><span class="o">.</span> <span class="n">Must</span> <span class="k">pass</span> <span class="n">Dataverse</span> <span class="n">email</span> <span class="n">validation</span> <span class="n">rules</span> <span class="p">(</span><span class="n">so</span> <span class="s2">&quot;test@test.invalid&quot;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">acceptable</span><span class="p">)</span><span class="o">.</span>
  <span class="o">-</span><span class="n">n</span> <span class="n">CNAME</span><span class="p">,</span> <span class="o">--</span><span class="n">contact</span><span class="o">-</span><span class="n">name</span> <span class="n">CNAME</span>
                        <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Contact</span> <span class="n">name</span> <span class="k">for</span> <span class="n">Dataverse</span> <span class="n">records</span>
  <span class="o">-</span><span class="n">v</span><span class="p">,</span> <span class="o">--</span><span class="n">verbosity</span>       <span class="n">Verbose</span> <span class="n">output</span>
  <span class="o">-</span><span class="n">i</span> <span class="n">ROR</span><span class="p">,</span> <span class="o">--</span><span class="n">ror</span> <span class="n">ROR</span>     <span class="n">REQUIRED</span><span class="p">:</span> <span class="n">Institutional</span> <span class="n">ROR</span> <span class="n">URL</span><span class="o">.</span> <span class="n">Eg</span><span class="p">:</span> <span class="s2">&quot;https://ror.org/03rmrcq20&quot;</span><span class="o">.</span> <span class="n">This</span> <span class="n">identifies</span> <span class="n">the</span> <span class="n">institution</span> <span class="ow">in</span> <span class="n">Dryad</span> <span class="n">repositories</span><span class="o">.</span>
  <span class="o">--</span><span class="n">tmpfile</span> <span class="n">TMP</span>         <span class="n">Temporary</span> <span class="n">file</span> <span class="n">location</span><span class="o">.</span> <span class="n">Default</span><span class="p">:</span> <span class="o">/</span><span class="n">tmp</span><span class="p">)</span>
  <span class="o">--</span><span class="n">db</span> <span class="n">DBASE</span>            <span class="n">Tracking</span> <span class="n">database</span> <span class="n">location</span> <span class="ow">and</span> <span class="n">name</span><span class="o">.</span> <span class="n">Default</span><span class="p">:</span> <span class="err">$</span><span class="n">HOME</span><span class="o">/</span><span class="n">dryad_dataverse_monitor</span><span class="o">.</span><span class="n">sqlite3</span>
  <span class="o">--</span><span class="n">log</span> <span class="n">LOG</span>             <span class="n">Complete</span> <span class="n">path</span> <span class="n">to</span> <span class="n">log</span><span class="o">.</span> <span class="n">Default</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">dryadd</span><span class="o">.</span><span class="n">log</span>
  <span class="o">-</span><span class="n">l</span><span class="p">,</span> <span class="o">--</span><span class="n">no_force_unlock</span>
                        <span class="n">No</span> <span class="n">forcible</span> <span class="n">file</span> <span class="n">unlock</span><span class="o">.</span> <span class="n">Requiredif</span> <span class="o">/</span><span class="n">lock</span> <span class="n">endpint</span> <span class="ow">is</span> <span class="n">restricted</span>
  <span class="o">-</span><span class="n">x</span> <span class="n">EXCLUDE</span> <span class="p">[</span><span class="n">EXCLUDE</span> <span class="o">...</span><span class="p">],</span> <span class="o">--</span><span class="n">exclude</span> <span class="n">EXCLUDE</span> <span class="p">[</span><span class="n">EXCLUDE</span> <span class="o">...</span><span class="p">]</span>
                        <span class="n">Exclude</span> <span class="n">these</span> <span class="n">DOIs</span><span class="o">.</span> <span class="n">Separate</span> <span class="n">by</span> <span class="n">spaces</span>
  <span class="o">--</span><span class="n">version</span>             <span class="n">Show</span> <span class="n">version</span> <span class="n">number</span> <span class="ow">and</span> <span class="n">exit</span>
</code></pre></div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../other_utils/" class="btn btn-neutral float-right" title="Other utilities">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../other_utils/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
