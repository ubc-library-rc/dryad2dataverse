<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Dryad2dataverse</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Overview";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Dryad2dataverse</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">Overview</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#_1"></a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#not-just-a-library-no-programming-required">Not just a library - no programming required</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#why-would-i-need-this">Why would I need this?</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#quick-install">Quick install</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic usage</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#converting-json">Converting JSON</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#transferring-data">Transferring data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#change-monitoring">Change monitoring</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="installation/">Installation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="scripts/">Scripts</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="reference/">General Reference</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="api_reference/">API Reference</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="track/">Tracking Database Structure</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="faq/">FAQ</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="credits/">Credits</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Dryad2dataverse</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Overview</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="dryad2dataverse-translate-transfer-and-track">dryad2dataverse -  translate, transfer and track<a class="headerlink" href="#dryad2dataverse-translate-transfer-and-track" title="Permanent link">&para;</a></h1>
<h2 id="_1"><img alt="dryad2dataverse logo" src="images/dryad2dataverseLogo.svg" /><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p><strong>dryad2dataverse</strong> is an oddly specific <a href="https://python.org">Python</a> programming language library and an associated application which allows easier transfer of metadata and data from a Dryad data repository (ie, <a href="https://datadryad.org">https://datadryad.org</a>) to a <a href="https://dataverse.org/" title="Dataverse software main site">Dataverse</a> repository.</p>
<p>With these tools it&rsquo;s possible to: </p>
<p>a) Serialize Dryad metadata to Dataverse JSON</p>
<p>b) Transfer Dryad studies to Dataverse without any knowledge of the somewhat complex Dataverse API</p>
<p>c) Monitor changes in status</p>
<p>The minimum required Python version for <strong>dryad2dataverse</strong> is Python <strong>3.6</strong>, as it is the earliest version which supports <a href="https://www.python.org/dev/peps/pep-0498/">f-strings</a>. It was developed using version 3.7.2, and it runs just fine under the [now current] 3.9.2. You can find Python at <a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a>. <em>No testing was done with Anaconda, only stock Python</em>. That said, it probably works fine with Anaconda.</p>
<h3 id="not-just-a-library-no-programming-required">Not just a library - no programming required<a class="headerlink" href="#not-just-a-library-no-programming-required" title="Permanent link">&para;</a></h3>
<hr />
<p>If you hate programming, are pressed for time and/or don&rsquo;t want to read any documentation, <strong>dryad2dataverse</strong> also comes with a <a href="scripts/">command line tool</a> to do all of these things without requiring any knowledge of Python or programming.</p>
<hr />
<p>The <strong>dryad2dataverse</strong> library is free and open source, released under the MIT license. It&rsquo;s also not written by anyone with a degree in computer science, so as the MIT license says: </p>
<pre class="codehilite"><code>Software is provided &quot;as is&quot;, without warranty of any kind
</code></pre>

<h3 id="why-would-i-need-this">Why would I need this?<a class="headerlink" href="#why-would-i-need-this" title="Permanent link">&para;</a></h3>
<p>There are a few reasons why you might find this product useful.</p>
<ul>
<li>
<p>You are a researcher and you wish to deposit via API into Dataverse repository. </p>
</li>
<li>
<p>You&rsquo;ve used Dryad, but the Dataverse JSON and API is unfamiliar and <a href="https://guides.dataverse.org/en/latest/_downloads/dataset-create-new-all-default-fields.json" title="Complex Dataverse JSON">complex</a>. </p>
</li>
<li>
<p>You want to write your Dryad JSON and have it convert automatically.</p>
</li>
<li>
<p>Your institution has researchers who have deposited data into Dryad and you wish to copy them into the Dataverse repository which contains the bulk of your institution&rsquo;s research data (for example, the Dataverse repository at <a href="https://dataverse.scholarsportal.info">https://dataverse.scholarsportal.info</a>).</p>
</li>
<li>
<p>And on top of that, you don&rsquo;t want to keep checking to see if there were any updates, so you wish to automate the process.</p>
</li>
</ul>
<h2 id="quick-install">Quick install<a class="headerlink" href="#quick-install" title="Permanent link">&para;</a></h2>
<pre class="codehilite"><code>git clone https://github.com/ubc-library-rc/dryad2dataverse.git
cd dryad2dataverse
pip install .
</code></pre>

<h2 id="basic-usage">Basic usage<a class="headerlink" href="#basic-usage" title="Permanent link">&para;</a></h2>
<h4 id="converting-json">Converting JSON<a class="headerlink" href="#converting-json" title="Permanent link">&para;</a></h4>
<pre class="codehilite"><code>&gt;&gt;&gt; #Convert Dryad JSON to Dataverse JSON and save to a file
&gt;&gt;&gt; import dryad2dataverse.serializer
&gt;&gt;&gt; i_heart_dryad = dryad2dataverse.serializer.Serializer('doi:10.5061/dryad.2rbnzs7jp')
&gt;&gt;&gt; with open('dataverse_json.json', 'w') as f:
    f.write(f'{i_heart_dryad.dvJson}')
&gt;&gt;&gt; #Or just view it this way in a Python session
&gt;&gt;&gt; i_heard_dryad.dvJson
</code></pre>

<h4 id="transferring-data">Transferring data<a class="headerlink" href="#transferring-data" title="Permanent link">&para;</a></h4>
<p>Note: a number of variables must be set [correctly] for this to work, such as your target dataverse. This example continues with the Serializer instance above.</p>
<pre class="codehilite"><code>&gt;&gt;&gt; import dryad2dataverse.transfer
&gt;&gt;&gt; dv = dryad2dataverse.transfer.Transfer(i_heart_dryad)
&gt;&gt;&gt; # Files must first be downloaded; there is no direct transfer
&gt;&gt;&gt; dv.download_files()
&gt;&gt;&gt; # 'dryad' is the short name of the target dataverse
&gt;&gt;&gt; # Yours may be different
&gt;&gt;&gt; # First, create the study metadata
&gt;&gt;&gt; dv.upload_study(targetDv='dryad')
&gt;&gt;&gt; # Then upload the files
&gt;&gt;&gt; dv.upload_files()
</code></pre>

<h4 id="change-monitoring">Change monitoring<a class="headerlink" href="#change-monitoring" title="Permanent link">&para;</a></h4>
<p>Because monitoring the status of something over time requires persistence, the dryad2dataverse.monitor.Monitor object uses an <a href="https://sqlite.org">SQLite3</a> database, which has the enormous advantage of being a single file that is portable between systems. This allows monitoring without laborious database configuration on a host system, and updates can be run on any system that has sufficient storage space to act as an intermediary between Dryad and Dataverse. This is quite a simple database, as the <a href="dbase_structure/">documentation on its structure</a> shows.</p>
<p>If you need to change systems just swap the database to the new system.</p>
<p>In theory you could run it from a Raspberry Pi Zero that you have in a desk drawer, although that may not be the wisest idea. Maybe use your cell phone.</p>
<p>Monitoring changes requires both the <code>Serializer</code> and <code>Transfer</code> objects from above.</p>
<pre class="codehilite"><code>&gt;&gt;&gt; # Create the Monitor instance
&gt;&gt;&gt; monitor = dryad2dataverse.monitor.Monitor()
&gt;&gt;&gt; # Check status of your serializer object
&gt;&gt;&gt; monitor.status(i_heart_dryad)
{'status': 'new', 'dvpid': None}
&gt;&gt;&gt; # imagine, now that i_still_heart_dryad is a study
&gt;&gt;&gt; # that was uploaded previously
&gt;&gt;&gt; monitor.status(i_still_heart_dryad)
{'status': 'unchanged', 'dvpid': 'doi:99.99999/FK2/FAKER'}
&gt;&gt;&gt; #Check the difference in files
&gt;&gt;&gt; monitor.diff_files(i_still_heart_dryad)
{}
&gt;&gt;&gt; # After the transfer dv above:
&gt;&gt;&gt; monitor.update(transfer)
&gt;&gt;&gt; # And then, to make your life easier, update the last time you checked Dryad
&gt;&gt;&gt; monitor.set_timestamp()
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation/" class="btn btn-neutral float-right" title="Installation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="installation/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.1.2
Build Date UTC : 2021-03-22 20:59:25.381819+00:00
-->
